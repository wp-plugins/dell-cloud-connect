/*!
 * Dell Blog Network Javascript
 */
$.noConflict();(function(i,g,C){var B=this;var a="http://dell.system-11.com";var f="ec_callback";var z;var r;var h;var s;function v(){if(typeof _dec!="undefined"){l("found _dec, executing functions...");while(_dec.length>0){var D=_dec.shift();k(D)}}else{_dec=[]}_dec.push=k}function k(G){var E=null;var D=false;var F=G.shift();switch(F){case"setBaseUrl":E=c;break;case"setClientId":E=b;break;case"setDivision":E=u;break;case"getFeed":E=y;break;case"updateFeed":E=q;break;case"getBlogList":E=e;break;case"logBaseUrl":E=t;break;case"enableDebug":E=j;break;case"setBlogStatus":E=x;break;case"setBacklinkActive":E=o;break;case"setBlogRoll":E=m;break;case"addBlogRoll":E=n;break;case"addBlog":E=w;break;case"removeBlog":E=A;break}if(typeof E==="function"){E.apply(B,G)}}function l(D){if(s&&g.console){console.log(D)}}function y(D,F){var E={clientId:z,division:r};p("articles/feed",E,function(K){var J=K.data.blogs;var G=K.data.client;var H="<ul>";l("Feed Ajax Response");l(K);for(var I=0;I<D&&I<J.length;I++){if("undefined"!=typeof J[I].currentArticle){H+='<li><strong><a target="_blank" rel="nofollow" href="'+a+"/click?url="+encodeURIComponent(J[I].currentArticle.link)+'">'+J[I].currentArticle.title+"</a></strong><br>";if(F){H+='<span class="dec-description">'+d(J[I].currentArticle.description,30)+"...</span><br>"}H+='<span class="dec-posted-by">Posted by <a rel="nofollow" target="_blank" href="'+J[I]["url"]+'">'+J[I]["title"]+"</a></span></li>"}}H+="</ul>";if(G.backlinkActive){H+='<a href="'+G.backlink+'">'+G.backlinkText+"</a>"}i("#dell_edu_content").html(H)})}function q(){var D={clientId:z};p("feed.updatebyclient",D,function(E){l(["Feed Updated",E])})}function e(){var D={clientId:z,division:r};p("blog/list",D,function(H){l(["Blog List Ajax Response",H]);var G=H.data.client;var K=H.data.categories;var F="";for(category in K){F+='<div class="dbn-category">';F+="<h3>"+category+"</h3>";F+="<ul>";for(var J=0;J<K[category].length;J++){var L=K[category][J].title;var N=K[category][J].description;var E=K[category][J].url;if(L=="false"){L=""}if(N=="false"){N=""}if(E=="false"){E=""}F+='<li id="blog_'+K[category][J]._id+'" style="clear:both;"><p style="float:left;margin-right:10px;">';if(category=="User Added"){F+="<a href=\"\" onclick=\"javascript:var remblog=confirm('Are you sure you want to remove this blog from your list?'); if(remblog) { _dec.push(['removeBlog','"+K[category][J]._id+'\']); return false;}"><i class="icon-remove"></i></a>'}else{F+="<input onclick=\"_dec.push(['setBlogStatus','"+K[category][J]._id+'\']);" type="checkbox" name="blog" id="'+K[category][J]._id+'" value="'+K[category][J]._id+'"';var M=" checked ";for(var I=0;I<G.excludes.length;I++){if(K[category][J]._id==G.excludes[I]){M=""}}F+=M;F+="/>"}F+="</p><p><strong>"+L+"</strong> - "+N+"<br />"+E+"</p></li>"}F+="</ul>";F+="</div>"}F+='<div style="clear:both"></div>';F+='<div><p style="float:left;margin-right:10px;">';F+='<input onclick="_dec.push([\'setBacklinkActive\']);" type="checkbox" id="dec_backlink_active" name="backlinkstatus" value="active"';if(G.backlinkActive==1){F+=" checked "}F+="/></p><p><strong>Show Sponsor Link</strong><br />Please help support the development of this plugin by checking this box.</p></div>";F+='<button class="button" onclick="_dec.push([\'updateFeed\']);">Save Settings</button>';i("#dec_blogs").html(F)})}function b(D){z=D}function u(D){r=D}function o(){var D={clientId:z,backlinkActive:i("#dec_backlink_active").attr("checked")};l(["Changing backlink status: ",D]);p("client/backlinktoggle",D,function(E){l(["Backlink Status Response",E])})}function x(E){var F={clientId:z,blogId:E,include:i("#"+E).attr("checked")};var D="Including Blog";l(["Toggling blog status for client",E,F]);p("blog/exclude",F,function(G){l(["Blog Status Response",G])})}function w(){i(".dbn_error").hide();i("#edu_connect_btn_addblog").attr("disabled",true);var D=i("#edu_connect_text_addblog").val();var E={clientId:z,division:r,url:D};l(["Adding Bolg: ",E]);p("client/addblog",E,function(F){l(["Blog Add Response",F]);if(F.error){i(".dbn_error").text("Error adding blog: "+F.error).show();i("#edu_connect_btn_addblog").removeAttr("disabled")}else{g.location.reload(true)}})}function A(D){var E={clientId:z,blogId:D};l(["Removing blog for client",D,E]);p("blog/remove",E,function(F){l(["Blog Remove Response",F]);i("#blog_"+D).hide()})}function m(D){l(["Setting blog roll",D]);h=D}function n(){if(h!=null){i("#edu_connect_btn_blogroll").attr("disabled",true);var D={clientId:z,blogs:h,division:r};l(["Adding BlogRoll: ",D]);p("client/addblogroll",D,function(E){l(["Blog Add Response",E]);g.location.reload(true)})}else{l("No Blog Roll Set...")}}function c(D){a=D}function j(){s=true}function t(){l("Base Url: "+a)}function p(E,G,H){var F;if(E===false&&typeof ajaxurl!="undefined"){F={url:ajaxurl,method:"post",type:"json",data:G}}else{var D=a+"/"+E;F={url:D,type:"jsonp",jsonpCallback:f,data:G,success:H}}i.ajax(F)}function d(E,D){expString=E.split(/\s+/,D);theNewString=expString.join(" ");return theNewString}v()})(ender,window,document);